<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>مولد QR حسب كل ضيف</title>
<style>
  body { font-family: Arial; text-align:center; padding:20px; }
  textarea { width:90%; height:150px; font-size:18px; padding:10px; }
  button { padding:12px 25px; font-size:18px; margin-top:10px; }
  #qrcodes { display:flex; flex-wrap:wrap; justify-content:center; margin-top:20px; }
  .qr-item { margin:10px; text-align:center; }
</style>
</head>
<body>

<h2>✨ اكتبي أسماء الضيوف (كل اسم بسطر)</h2>

<textarea id="namesInput" placeholder="مثال:
حنان
ليلى
اسماء
"></textarea>

<br>
<button onclick="generateQRs()">توليد الباركودات</button>

<div id="qrcodes"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>

const webAppUrl = "https://script.google.com/macros/s/AKfycbymZk-B8T0T35IyOMN-Gaq3B2QpsskVv7pM7oKTPKGqlFMQqTj1sBsUWInoA9vkubDeTg/exec";

function generateQRs(){
    
    const rawNames = document.getElementById("namesInput").value.trim();
    const names = rawNames.split("\n").map(n => n.trim()).filter(n => n !== "");

    const container = document.getElementById("qrcodes");
    container.innerHTML = "";

    names.forEach((name, index) => {

        // رابط الشخص الواحد
        const link = `${webAppUrl}?name=${encodeURIComponent(name)}&id=${Date.now()}_${index}`;

        // توليد QR
        const canvas = document.createElement("canvas");
        new QRious({
            element: canvas,
            value: link,
            size: 200
        });

        // عرض النتيجة
        const div = document.createElement("div");
        div.className = "qr-item";
        div.innerHTML = `
            <p>${name}</p>
        `;
        div.appendChild(canvas);

        container.appendChild(div);
    });
}

</script>

</body>
</html>

